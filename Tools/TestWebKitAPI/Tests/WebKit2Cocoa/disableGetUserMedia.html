<script>
    function gotUserMedia(mediaStream)
    {
        window.webkit.messageHandlers.testHandler.postMessage('gUM allowed');
    }

    function userMediaError(error)
    {
        window.webkit.messageHandlers.testHandler.postMessage('gUM denied');
    }

    var constraints = { audio: false, video: true};
    navigator.mediaDevices.getUserMedia(constraints)
        .then(gotUserMedia).
        catch(userMediaError);
</script>
