<!DOCTYPE html>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<body>
<script>
var t = async_test('Makes sure that dynamically added prefetch does not call beforeload.');
t.step(function() {
    onload = t.step_func(function() { setTimeout(t.done(), 100); });
    var link = document.createElement("link");
    link.rel = "prefetch";
    link.onbeforeload = t.step_func(function() {
        assert_unreached("Beforeload should not be called.")
    })
    document.body.appendChild(link);
});
</script>
</body>
