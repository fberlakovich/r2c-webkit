# Build unit tests
webkit_tests_cflags = \
	-fno-strict-aliasing \
	-I$(srcdir)/Source/JavaScriptCore/ForwardingHeaders \
	-I$(WebKit) \
	-I$(GENSOURCES) \
	-I$(top_builddir)/Source/WebKit/gtk \
	-I$(top_srcdir)/Source/WebCore/bindings \
	-I$(top_srcdir)/Source/WebCore/bindings/gobject \
	$(global_cppflags) \
	$(global_cflags) \
	$(javascriptcore_cppflags) \
	$(FREETYPE_CFLAGS) \
	$(GLIB_CFLAGS) \
	$(GTK_CFLAGS) \
	$(LIBSOUP_CFLAGS) \
	$(XRENDER_CFLAGS) \
	$(XT_CFLAGS)

webkit_tests_ldadd = \
	libjavascriptcoregtk-@WEBKITGTK_API_MAJOR_VERSION@.@WEBKITGTK_API_MINOR_VERSION@.la \
	libwebkitgtk-@WEBKITGTK_API_MAJOR_VERSION@.@WEBKITGTK_API_MINOR_VERSION@.la \
	$(FREETYPE_LIBS) \
	$(GTK_LIBS) \
	$(GLIB_LIBS) \
	$(LIBSOUP_LIBS) \
	$(XRENDER_LIBS)

webkit_tests_ldflags = \
	-no-install \
	-no-fast-install

if ENABLE_WEBKIT1
noinst_PROGRAMS += \
	Programs/WebKit1GObjectAPITests/testapplicationcache \
	Programs/WebKit1GObjectAPITests/testcontextmenu \
	Programs/WebKit1GObjectAPITests/testdomdocument \
	Programs/WebKit1GObjectAPITests/testdomdomwindow \
	Programs/WebKit1GObjectAPITests/testdomnode \
	Programs/WebKit1GObjectAPITests/testhttpbackend \
	Programs/WebKit1GObjectAPITests/testfavicondatabase \
	Programs/WebKit1GObjectAPITests/testloading \
	Programs/WebKit1GObjectAPITests/testglobals \
	Programs/WebKit1GObjectAPITests/testmimehandling \
	Programs/WebKit1GObjectAPITests/testnetworkrequest \
	Programs/WebKit1GObjectAPITests/testnetworkresponse \
	Programs/WebKit1GObjectAPITests/testwebframe \
	Programs/WebKit1GObjectAPITests/testwebbackforwardlist \
	Programs/WebKit1GObjectAPITests/testwebhistoryitem \
	Programs/WebKit1GObjectAPITests/testwindow \
	Programs/WebKit1GObjectAPITests/testdownload \
	Programs/WebKit1GObjectAPITests/testatk \
	Programs/WebKit1GObjectAPITests/testatkroles \
	Programs/WebKit1GObjectAPITests/testhittestresult \
	Programs/WebKit1GObjectAPITests/testwebinspector \
	Programs/WebKit1GObjectAPITests/testwebsettings \
	Programs/WebKit1GObjectAPITests/testwebresource \
	Programs/WebKit1GObjectAPITests/testwebdatasource \
	Programs/WebKit1GObjectAPITests/testwebplugindatabase \
	Programs/WebKit1GObjectAPITests/testwebview \
	Programs/WebKit1GObjectAPITests/testkeyevents \
	Programs/WebKit1GObjectAPITests/testcopyandpaste
endif

# Add additional tests here
Programs_WebKit1GObjectAPITests_testapplicationcache_SOURCES = Source/WebKit/gtk/tests/testapplicationcache.c
Programs_WebKit1GObjectAPITests_testapplicationcache_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testapplicationcache_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testapplicationcache_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testcontextmenu_SOURCES = Source/WebKit/gtk/tests/testcontextmenu.c
Programs_WebKit1GObjectAPITests_testcontextmenu_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testcontextmenu_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testcontextmenu_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testdomdocument_SOURCES = Source/WebKit/gtk/tests/testdomdocument.c
Programs_WebKit1GObjectAPITests_testdomdocument_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testdomdocument_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testdomdocument_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testdomdomwindow_SOURCES = Source/WebKit/gtk/tests/testdomdomwindow.c
Programs_WebKit1GObjectAPITests_testdomdomwindow_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testdomdomwindow_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testdomdomwindow_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testdomnode_SOURCES = Source/WebKit/gtk/tests/testdomnode.c
Programs_WebKit1GObjectAPITests_testdomnode_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testdomnode_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testdomnode_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testhttpbackend_SOURCES = Source/WebKit/gtk/tests/testhttpbackend.c
Programs_WebKit1GObjectAPITests_testhttpbackend_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testhttpbackend_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testhttpbackend_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testfavicondatabase_SOURCES = Source/WebKit/gtk/tests/testfavicondatabase.c Source/WebKit/gtk/tests/test_utils.c
Programs_WebKit1GObjectAPITests_testfavicondatabase_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testfavicondatabase_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testfavicondatabase_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testglobals_SOURCES = Source/WebKit/gtk/tests/testglobals.c
Programs_WebKit1GObjectAPITests_testglobals_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testglobals_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testglobals_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testloading_SOURCES = Source/WebKit/gtk/tests/testloading.c
Programs_WebKit1GObjectAPITests_testloading_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testloading_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testloading_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testmimehandling_SOURCES = Source/WebKit/gtk/tests/testmimehandling.c Source/WebKit/gtk/tests/test_utils.c
Programs_WebKit1GObjectAPITests_testmimehandling_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testmimehandling_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testmimehandling_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testnetworkrequest_SOURCES = Source/WebKit/gtk/tests/testnetworkrequest.c
Programs_WebKit1GObjectAPITests_testnetworkrequest_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testnetworkrequest_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testnetworkrequest_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testnetworkresponse_SOURCES = Source/WebKit/gtk/tests/testnetworkresponse.c
Programs_WebKit1GObjectAPITests_testnetworkresponse_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testnetworkresponse_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testnetworkresponse_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testwebframe_SOURCES = Source/WebKit/gtk/tests/testwebframe.c
Programs_WebKit1GObjectAPITests_testwebframe_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testwebframe_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testwebframe_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testwebplugindatabase_SOURCES = Source/WebKit/gtk/tests/testwebplugindatabase.c
Programs_WebKit1GObjectAPITests_testwebplugindatabase_CFLAGS = -DTEST_PLUGIN_DIR=\"${shell pwd}/${top_builddir}/TestNetscapePlugin/.libs\" $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testwebplugindatabase_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testwebplugindatabase_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testwebbackforwardlist_SOURCES = Source/WebKit/gtk/tests/testwebbackforwardlist.c
Programs_WebKit1GObjectAPITests_testwebbackforwardlist_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testwebbackforwardlist_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testwebbackforwardlist_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testwebhistoryitem_SOURCES = Source/WebKit/gtk/tests/testwebhistoryitem.c
Programs_WebKit1GObjectAPITests_testwebhistoryitem_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testwebhistoryitem_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testwebhistoryitem_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testwindow_SOURCES = Source/WebKit/gtk/tests/testwindow.c
Programs_WebKit1GObjectAPITests_testwindow_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testwindow_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testwindow_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testdownload_SOURCES = Source/WebKit/gtk/tests/testdownload.c
Programs_WebKit1GObjectAPITests_testdownload_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testdownload_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testdownload_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testatk_SOURCES = Source/WebKit/gtk/tests/testatk.c
Programs_WebKit1GObjectAPITests_testatk_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testatk_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testatk_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testatkroles_SOURCES = Source/WebKit/gtk/tests/testatkroles.c
Programs_WebKit1GObjectAPITests_testatkroles_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testatkroles_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testatkroles_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testwebinspector_SOURCES = Source/WebKit/gtk/tests/testwebinspector.c Source/WebKit/gtk/tests/test_utils.c
Programs_WebKit1GObjectAPITests_testwebinspector_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testwebinspector_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testwebinspector_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testwebsettings_SOURCES = Source/WebKit/gtk/tests/testwebsettings.c
Programs_WebKit1GObjectAPITests_testwebsettings_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testwebsettings_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testwebsettings_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testwebresource_SOURCES = Source/WebKit/gtk/tests/testwebresource.c
Programs_WebKit1GObjectAPITests_testwebresource_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testwebresource_LDADD = $(webkit_tests_ldadd)

Programs_WebKit1GObjectAPITests_testwebdatasource_SOURCES = Source/WebKit/gtk/tests/testwebdatasource.c
Programs_WebKit1GObjectAPITests_testwebdatasource_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testwebdatasource_LDADD = $(webkit_tests_ldadd)

Programs_WebKit1GObjectAPITests_testwebview_SOURCES = Source/WebKit/gtk/tests/testwebview.c Source/WebKit/gtk/tests/test_utils.c
Programs_WebKit1GObjectAPITests_testwebview_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testwebview_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testwebview_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testhittestresult_SOURCES = Source/WebKit/gtk/tests/testhittestresult.c
Programs_WebKit1GObjectAPITests_testhittestresult_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testhittestresult_LDADD = $(webkit_tests_ldadd)

Programs_WebKit1GObjectAPITests_testkeyevents_SOURCES = Source/WebKit/gtk/tests/testkeyevents.c
Programs_WebKit1GObjectAPITests_testkeyevents_CFLAGS = $(webkit_tests_cflags)
Programs_WebKit1GObjectAPITests_testkeyevents_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testkeyevents_LDFLAGS = $(webkit_tests_ldflags)

Programs_WebKit1GObjectAPITests_testcopyandpaste_SOURCES = Source/WebKit/gtk/tests/testcopyandpaste.c \
	Source/WebCore/platform/gtk/GtkVersioning.c
Programs_WebKit1GObjectAPITests_testcopyandpaste_CFLAGS = $(webkit_tests_cflags) \
	-I$(srcdir)/Source/WebCore/platform/gtk \
	-I$(srcdir)/Source/WebCore
Programs_WebKit1GObjectAPITests_testcopyandpaste_LDADD = $(webkit_tests_ldadd)
Programs_WebKit1GObjectAPITests_testcopyandpaste_LDFLAGS = $(webkit_tests_ldflags)

EXTRA_DIST +=  \
	$(WebKit)/tests/resources/* \
	$(WebKit)/tests/test_utils.h

